<!-- pages/cassettes/[brand].vue -->
<script setup lang="ts">
const route = useRoute();
const brand = route.params.brand as string;
const yearGroups = ref<string[]>([]);

// –ò—Å—Ç–æ—Ä–∏—è –∏–∑ Knowledge Base + —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
const histories: Record<string, string> = {
  tdk: 'TDK ‚Äî —è–ø–æ–Ω—Å–∫–∞—è –∫–æ–º–ø–∞–Ω–∏—è, –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –≤ 1935 –≥–æ–¥—É. –°–Ω–∞—á–∞–ª–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∞—Å—å –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ —Ñ–µ—Ä—Ä–∏—Ç–æ–≤, –∞ –∑–∞—Ç–µ–º –ø–µ—Ä–µ—à–ª–∞ –≤ —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫—É. TDK —Å—Ç–∞–ª–∞ –æ–¥–Ω–∏–º –∏–∑ –ª–∏–¥–µ—Ä–æ–≤ —Ä—ã–Ω–∫–∞ –∞—É–¥–∏–æ–∫–∞—Å—Å–µ—Ç –≤ 1970-80-—Ö –≥–æ–¥–∞—Ö. –ò—Ö –∫–∞—Å—Å–µ—Ç—ã —Å–µ—Ä–∏–∏ SA, D –∏ Metal –±—ã–ª–∏ —Å–∞–º—ã–º–∏ –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ –≤ –º–∏—Ä–µ. –§—ã—Ä-—Ñ—ã—Ä! ü¶ä',
  basf: 'BASF ‚Äî –Ω–µ–º–µ—Ü–∫–∏–π —Ö–∏–º–∏—á–µ—Å–∫–∏–π –≥–∏–≥–∞–Ω—Ç, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –≤ 1865 –≥–æ–¥—É. –ò–∑–≤–µ—Å—Ç–µ–Ω –Ω–µ —Ç–æ–ª—å–∫–æ –∫–∞–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –∫—Ä–∞—Å–∏—Ç–µ–ª–µ–π, –Ω–æ –∏ –∫–∞–∫ –æ–¥–∏–Ω –∏–∑ –ø–µ—Ä–≤—ã—Ö —Å–æ–∑–¥–∞—Ç–µ–ª–µ–π –∞—É–¥–∏–æ–∫–∞—Å—Å–µ—Ç.',
  sony: 'Sony ‚Äî –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è —è–ø–æ–Ω—Å–∫–∞—è –∫–æ–º–ø–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤ 1963 –≥–æ–¥—É –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–ª–∞ –ø–µ—Ä–≤—É—é –≤ –º–∏—Ä–µ –∫–æ–º–ø–∞–∫—Ç-–∫–∞—Å—Å–µ—Ç—É. –ò–º–µ–Ω–Ω–æ Sony –∑–∞–¥–∞–ª–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–∂–µ –±—ã–ª –ø—Ä–∏–Ω—è—Ç –≤—Å–µ–º–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è–º–∏.'
};

const history = histories[brand] || '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–∫–æ—Ä–æ –ø–æ—è–≤–∏—Ç—Å—è!';

onMounted(async () => {
  try {
    const data = await $fetch(`https://back.assunayuuki.ru/cassettes/years/${brand}`);
    yearGroups.value = Array.isArray(data) ? data.sort() : [];
  } catch (err) {
    console.error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –≥–æ–¥—ã:', err);
  }
});
</script>

<template>
  <DecoratorRgbBorder>
    <DecoratorOpacityBackground :opacity="0.85">
      <div class="p-4 md:p-8 font-orbitron text-black max-w-4xl mx-auto">

        <h1 class="text-2xl md:text-3xl retro-text mb-6 text-gray-900 drop-shadow-[0_2px_3px_rgba(0,0,0,0.7)]">
          üìº –ê—É–¥–∏–æ–∫–∞—Å—Å–µ—Ç—ã {{ brand.toUpperCase() }}
        </h1>

        <div class="bg-black/30 p-4 rounded-lg border border-cyan-500/50 mb-8">
          <p class="text-gray-800 drop-shadow-[0_1px_2px_rgba(0,0,0,0.5)] leading-relaxed italic">
            –ó–∞ —ç—Ç–∏ –¥–æ–ª–≥–∏–µ –≥–æ–¥—ã —è –ø–æ–≤–∏–¥–∞–ª–∞ –º–Ω–æ–≥–æ –≤—Å–µ–≥–æ, –∏ —Å–∞–º—ã–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º –¥–ª—è –º–µ–Ω—è –æ–∫–∞–∑–∞–ª–∏—Å—å –≤—Å—è–∫–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–æ–±—Ä–µ—Ç–µ–Ω—ã –¥–∞–≤–Ω–æ-–¥–∞–≤–Ω–æ. –û—Å–æ–±–µ–Ω–Ω–æ —è –ª—é–±–ª—é —è–ø–æ–Ω—Å–∫–∏–µ –∞—É–¥–∏–æ–∫–∞—Å—Å–µ—Ç—ã ‚Äî –æ–Ω–∏ —Ç–∞–∫–∏–µ –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–µ –∏ –∫—Ä–∞—Å–∏–≤—ã–µ! –§—ã—Ä-—Ñ—ã—Ä! ü¶ä
          </p>
        </div>

        <div class="text-gray-800 mb-10 whitespace-pre-line">{{ history }}</div>

        <h2 class="text-xl retro-text mb-4 text-gray-900">–ö–∞—Å—Å–µ—Ç—ã –ø–æ –≥–æ–¥–∞–º</h2>

        <div v-if="yearGroups.length === 0" class="text-gray-600 italic">
          –ö–∞—Å—Å–µ—Ç—ã —ç—Ç–æ–≥–æ –±—Ä–µ–Ω–¥–∞ –µ—â—ë –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã.
        </div>
        <div v-else class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
          <NuxtLink
              v-for="years in yearGroups"
              :key="years"
              :to="`/cassettes/${brand}/${years}`"
              class="p-3 bg-pink-900/10 border border-pink-700 rounded text-center hover:bg-pink-800/20"
          >
            {{ brand.toUpperCase() }} {{ years }}
          </NuxtLink>
        </div>

        <div class="mt-8 text-center">
          <NuxtLink to="/cassettes" class="text-cyan-900 hover:text-cyan-700">&larr; –ù–∞–∑–∞–¥ –∫ –∫–∞—Ç–∞–ª–æ–≥—É</NuxtLink>
        </div>

      </div>
    </DecoratorOpacityBackground>
  </DecoratorRgbBorder>
</template>